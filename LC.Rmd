---
title: "Learning Checks"
author: "Albert Y. Kim"
date: "Last updated on `r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    toc_depth: 1
    theme: cosmo
    highlight: tango
    df_print: paged
---

<style>
h1{font-weight: bold;}
h2{color: #3399ff;}
h3{color: #3399ff;}
slides > slide.backdrop {background: white;}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, fig.width=8, fig.height=4.5)
set.seed(76)
library(nycflights13)
library(dplyr)
library(ggplot2)
library(knitr)
library(mosaic)
```




<!----------------------------------------------------------------------------->
# Lec23 - Mon 4/10: Hypothesis Testing Framework and Terminology












<!----------------------------------------------------------------------------->
# Lec22 - Fri 4/7: Lady Tasting Tea

## Scenario

* Say you are a statistician and you meet someone called the "Lady Tasting Tea."
* She claims she can tell by tasting whether the tea or the milk was added first to a cup.
* You want to test whether
    + She can actually tell which came first
    + She's lying and is really guessing at random
* Say you have just enough tea/milk to pour into 8 cups.


## 1. Background Questions

1. What principles of experimental design should you follow in your test?

**Now let's suppose/assume she really can't tell i.e. she is guessing at random:**

1. What is the probability she guesses one cup right?
1. If you are counting the number of guesses out of 8 she gets correct, what are the possible outcomes?
1. What's more likely? That she gets 4 correct or get 7 correct?

## 2. Coding Questions

**Continuing to suppose/assume she really can't tell i.e. is guessing at random**, how would you use
the `mosaic` (in particular the 4 functions), `dplyr`, and `ggplot2` packages

1. To simulate the Lady Tasting Tea making a guess for a particular cup?
1. To simulate the Lady Tasting Tea guessing 8 times?
1. To count the number she got correct out of 8?
1. To repeat the above procedure many, many, many times? Say 10000 times.
1. To visualize the statistical distribution of the number out of 8 she gets correct?

Create a new R Script (File -> New File -> R Script) and copy the following starter code:

```{r, eval=FALSE, echo=TRUE}
library(ggplot2)
library(dplyr)
library(mosaic)

# Single cup outcome, where
# -1 indicates correct
# -0 indicates incorrect
single_cup_outcome <- c(1, 0)
```



## Discussion

```{r, eval=FALSE, echo=TRUE}
library(ggplot2)
library(dplyr)
library(mosaic)

# Single cup outcome, where
# -1 indicates correct
# -0 indicates incorrect
single_cup_outcome <- c(1, 0)

# 8 guesses:
do(8) * resample(single_cup_outcome, size=1)
resample(single_cup_outcome, size=8)

# 8 guesses, many, many, many times:
simulation <- do(10000) * resample(single_cup_outcome, size=8)
View(simulation)

# Count the number right by adding the columns. Note 
# summarise(sum=sum(variable)) only works for summing rows not columns:
simulation <- simulation %>% 
  mutate(n_correct = V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8) 
View(simulation)

# Visualize:
ggplot(simulation, aes(x=n_correct)) + 
  geom_bar() +
  labs(x="Number of Guesses Correct", title="Assuming she is guessing at random")
```

```{r, cache=TRUE, echo=FALSE}
single_cup_outcome <- c(1, 0)
simulation <- do(10000) * resample(single_cup_outcome, size=8)
simulation <- simulation %>% 
  mutate(n_correct = V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8) 
ggplot(simulation, aes(x=n_correct)) + 
  geom_bar() +
  labs(x="Number of Guesses Correct", title="Assuming she is guessing at random")
```









<!----------------------------------------------------------------------------->
# Lec21 - Thu 4/6: Confounding Variables and Designed Experiments

## Fried Chicken Face Off

Do people prefer this?            |  Or this?
:-------------------------:|:-------------------------:
<img src="assets/figure/ezells2.png" alt="Drawing" style="width: 200px;"/>  |  <img src="assets/figure/KFC.png" alt="Drawing" style="width: 200px;"/>

How would you design a taste test to ascertain, independent of hype, which fried
chicken tastes better? Use the relevant principles of designing experiements
from above.


## Design Principles Put in Place:

* **Single (but not double) blinded**: The taster doesn't know which (Ezell's or KFC) chicken they are eating, but the server does.
* **Randomizing**:
    + Which order of chicken you eat:  KFC first or not
    + Which kind of meat (wing, breast, leg) between tasters.  Each taster would try two kinds of meat. 
* **Accounting for**:
    + Which kind of meat within a taster. Ex: if you eat a KFC wing, you will necessarily eat an Ezell's wing
    + Temperature: We picked a place that is central to both Ezell's and KFC, given the cooling down of the chicken that can occur during travel.
    + Kind of batter: Wwe can't do KFC crispy chicken b/c Ezell's doesn't have that type of batter. This is a limitation of the study b/c some feel the crispy chicken is better.
* **Replicates**: Just one replicate of each kind of meat due to finite budget and finite stomach space.


## Results:

**Final score:  KFC 8, Ezell's 4**. Some notes:

* Even though people were "blinded", most knew which of the two pieces was from KFC.
* People generally felt
    + The meat from Ezell's was better, and this was magnified as the chicken went cold.
    + The skin was better at KFC.  Given that fried chicken is what it is b/c of the skin, people voted for KFC.
* Future studies should
    + Consider the chicken and the skin separately.
    + Have "overall experience" scores.
    + **Blocked** users into two groups first: those who've had Ezell's before and those who didn't.
* This can be viewed as an example of a **pilot study** used to inform how to design a study appropriately.







<!----------------------------------------------------------------------------->
# Lec20 - Wed 4/5: Introduction to Sampling

## Example Code

Go over this code first:

```{r, eval=FALSE, echo=TRUE}
# Load packages
library(dplyr)
library(ggplot2)
library(mosaic)

# Define vector to sample from
fruit <- c("apple", "orange", "mango")

# 1. Shuffling works with do()
# Do this many times to get a feel for it:
do(5) * shuffle(fruit)

# 2. Shuffling works with mutate as well:
example_data <- data_frame(
  name = c("Ilana", "Abbi", "Hannibal"),
  fruit = c("apple", "orange", "mango")
)
# Do this many times to get a feel for it:
example_data %>% 
  mutate(fruit = shuffle(fruit))

# 3. Testing the various inputs. Discuss with your peers what each is doing:
resample(fruit, size=1)
resample(fruit, replace=FALSE)
resample(fruit, prob=c(0.495, 0.495, 0.01))
```


## Learning Checks 1-5

1. Rewrite `rflip(10)` using the `resample()` command. Hint: `coin <- c("H", "T")`
1. Rewrite `shuffle(fruit)` command by changing the minimal number of default settings of `resample()`. Test this on `fruit`
1. Write code that will allow you to generate a sample of 15 fruit without replacement.
1. Write code that will allow you to generate a sample of 15 fruit with replacement.
1. What's the fastest way to do the above 5 times? Write it out


## Learning Check 

A medical doctor pours over some his patients' medical records and observes:

People who do this:            |  Wake up with this:
:-------------------------:|:-------------------------:
<img src="assets/figure/shoes.jpg" alt="Drawing" style="height: 300px;"/>  |  <img src="assets/figure/headache.jpg" alt="Drawing" style="height: 300px;"/>

He then asserts the following **causal** relationship:

* **Explanatory AKA treatment variable**: sleeping with shoes on 
* **Response variable**: causes one to wake up with a headache

What's wrong with the doctor's logic? What is **really** going on?


## Discussion

```{r, eval=FALSE, echo=TRUE}
fruit <- c("apple", "orange", "mango")

# LC1: rflip(10)
coin <- c("H", "T")
resample(coin, size=10)
rflip(10)

# LC2: shuffle(fruit)
resample(fruit, replace=FALSE)
shuffle(fruit)

# LC3: The following yields an error. You can't sample more elements without
# replacement than there are in the vertor. In other words, the largest sample
# without replacement of fruit is of size 3.
resample(fruit, size=15, replace=FALSE)

# LC4: Note the following two commands are the same because of the way the
# defaults are set:
resample(fruit, size=15)
resample(fruit, size=15, replace=TRUE)

# LC5: Fastest way to repeat 5 times. Use do()!
do(5) * resample(fruit, size=15)
```

As for our doctor:

* Shoes do not cause headaches.
* Alcohol is acting as a confounding variable. 








<!----------------------------------------------------------------------------->
# Lec19 - Mon 4/3: Intro to Probability via Simulation

## Example Code

Go over this code first:

```{r, eval=FALSE, echo=TRUE}
# Load packages
library(dplyr)
library(ggplot2)

# New package
library(mosaic)

# Flip a coin once. Try this multiple times:
rflip()

# Flip a coin 10 times. Try this multiple times:
rflip(10)

# Flip a coin 10 times, but do this 5 times. Try this multiple times
do(5) * rflip(10)

# Flip a coin 10 times, but do this 500 times
do(500) * rflip(10)

# Gah! There are too many rows!
simulations <- do(500) * rflip(10)

# Convert to data frame format; this allows us to better view in console
simulations <- simulations %>% 
  as_data_frame()

# We could also View() it
View(simulations)
```


## Learning Checks

* LC1: Create a histogram of the number illustrating the long-run behavior of flipping a coin 10 times.
    + Where is it centered?
    + Describe the shape of the **distribution** of values
* LC2: Try to replicate the above, but for the sum of two die rolls. Hint: `resample(c(1:6), 2)`


## Discussion

### LC1

```{r, cache=TRUE, echo=TRUE}
coin_flips <- do(500) * rflip(10)
coin_flips <- coin_flips %>% 
  as_data_frame()
```

If we `View(coin_flips)` the first 6 rows, we see that we have in **tidy format**:

```{r, cache=TRUE}
coin_flips %>% 
  head() %>% 
  knitr::kable()
```

So we plot a histogram of the `heads` variable with `binwidth=1` since we are
dealing with integers i.e. whole numbers.

```{r, cache=TRUE, echo=TRUE}
ggplot(coin_flips, aes(x=heads)) +
  geom_histogram(binwidth = 1)
```

* Where is it centered? Answer: At 5 i.e. half of 10.
* Describe the shape of the **distribution** of values. Answer: bell-shaped.
i.e. like a Normal distribution.


### LC2

Let's unpack `resample(c(1:6), 2)`:

* Running `c(1:6)` in the console returns six values, `1 2 3 4 5 6`, one for each possible die roll value.
* `resample(c(1:6), 2)` says: sample a value from 1 to 6 twice. This is akin to rolling a die twice.

```{r, cache=TRUE, echo=TRUE}
two_dice <- do(500) * resample(c(1:6), 2)
two_dice <- two_dice %>% 
  as_data_frame() 
```

If we `View(two_dice)` the first 6 rows, we see that we have in **tidy format**:

```{r, echo=FALSE, cache=TRUE}
two_dice %>% 
  head() %>% 
  knitr::kable()
```

So to get the sum of the two dice, we `mutate()` a new variable `sum` based on the sum of the two die:

```{r, cache=TRUE, echo=TRUE}
two_dice <- two_dice %>% 
  mutate(sum = V1 + V2)
```

```{r, echo=FALSE, cache=TRUE}
two_dice %>% 
  head() %>% 
  knitr::kable()
```

And now we plot it:

```{r, echo=TRUE, message=FALSE, cache=TRUE}
ggplot(two_dice, aes(x=sum)) +
  geom_histogram(binwidth=1)
```


### Advanced

What's the deal with the ugly axes tick marks? This is again b/c computers are stupid,
and ggplot does not know we are dealing only with whole numbers i.e. integers. We can:

* Convert the `sum` variable from numerical to categorical using `as.factor(sum)`
* Then plot using `geom_bar()` (for categorial x-variable) instead of `geom_histogram`

```{r, echo=TRUE, message=FALSE}
ggplot(two_dice, aes(x=as.factor(sum))) +
  geom_bar()
```










<!----------------------------------------------------------------------------->
# Lec17 - Wed 3/22: Intro to Statistical Inference

For each of the following 4 scenarios 

1. Identify
    + The **population** of interest and if applicable the **population parameter**
    + The **sample** used and if applicable the **statistic**
1. Comment on the **representativeness/generalizability** of the results of the sample to the population.

## Scenario 1

The Royal Air Force wants to study how resistant their airplanes are to bullets. They study the bullet holes on all the airplanes on the tarmac after an air battle against the Luftwaffe (German Air Force).

1. Statements about population 
    + **population**: ALL Royal Air Force airplanes
    + **population parameter**: It wasn't explicitly defined here, but imagine some aircraft engineering measure of resistance/strength.
1. Statements about sample
    + **sample**: Only the airplanes that **returned**  from an air battle
    + **statistic**: The same measure above, but applied only to the returning aircraft:
1. Representativeness/generalizability:
    + The sample suffers from **survivor's bias** i.e. only planes that didn't get shot down are included in your sample. You don't have information on the more important cases of when planes do get shot down. Wald, an American statistician during World War II, suggested that they reinforce parts of the planes where bullet holes [were not](http://clearthinking.co/survivorship-bias/) present.
    + Also, this was a fight only against the German Air Force. Perhaps the Italian and Japanese Air Forces used different bullets, but we don't have a sample representative of these groups.



## Scenario 2

You want to know the average income of Middlebury graduates in the last 10 years.  So you get the records of 10 randomly chosen Midd Kids.  They all answer and you take the average.

1. Statements about population 
    + **population**: All Middlebury graduates in the last ten years.
    + **population parameter**: The population mean $\mu$ (greek letter "mu"): their average income of all these graduates.
1. Statements about sample
    + **sample**: Then 10 chosen Midd Kids
    + **statistic**: The sample mean $\overline{x} = \frac{1}{n}\sum_{i=1}^n x_i$ of their incomes.
1. Representativeness/generalizability:
    + While the sample size is small (i.e. our estimate won't be very precise and highly variable), it is still representative (i.e. still accurate). We'll see that accuracy and precision are different concepts.



## Scenario 3

Imagine it's 1993 i.e. almost all households have landlines.  You want to know the average number of people in each household in Middlebury.  You randomly pick out 500 phone numbers from the phone book and conduct a phone survey.

1. Statements about population 
    + **population**: All Middlebury households
    + **population parameter**: the population mean $\mu$: average number of people in a household
1. Statements about sample
    + **sample**: Of the 500 households chosen, those *who answer the phone*
    + **statistic**: The sample mean $\overline{x} = \frac{1}{n}\sum_{i=1}^n x_i$ of the number of people in the households.
1. Representativeness/generalizability:
    + We assumed that all households have landlines, so the real issue of poorer individuals not having phones is not in question here.
    + Rather, households with larger numbers of people are more likely to have at least one person at home, and thus someone able to pick up the phone. Our results will be biased towards larger households. 
    + One way to address this is to keep trying until every house on your list picks up. But especially for single young professionals, this might be very hard to do.


## Scenario 4

You want to know the prevalence of illegal downloading of TV shows among Middlebury students.  You get the emails of 100 randomly chosen Midd Kids and ask them ``How many times did you download a pirated TV show last week?''

1. Statements about population 
    + **population**: Current Midd Kids
    + **population parameter**: the population proportion $p$ of Midd Kids who downloaded a pirated TV show last week.
1. Statements about sample
    + **sample**: The 100 randomly chosen Midd kids
    + **statistic**: The sample proportion $\widehat{p}$ of Midd Kids who **self-report** to have done so
1. Representativeness/generalizability:
    + This study could suffer from **volunteer bias**, where different people might have different probabilities of willingness to report the truth. Since we are asking Midd Kids to fess up to illegal activity, your results might get skewed.










<!----------------------------------------------------------------------------->
# Lec15 - Fri 3/17: 5MV#5 `arrange()` & `_join`

In ModernDive, LC5.13 thru 5.17 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/5-manip.html#arrange">Chapters 5.2.5-5.5.3</a>.

## Discussion

### LC 5.13-5.14

* **5.5 Looking at Figure 5.7, when joining `flights` and `weather`, or in order words match the hourly weather values with each flight, why do we need to join by all of `year`, `month`, `day`, `hour`, and `origin`, and not just `hour`?** Because `hour` is simply a value between 0 and 23; to identify a *specific* hour, we need to know which year, month, day and at which airport
* **5.6 What surprises you about the top 10 destinations from NYC in 2013?** Subjective! What surprises me is the high number of flights to Boston. Wouldn't it be easier and quicker to take the train?

### LC 5.15-5.17

**5.15 What are some ways to select all three of the `dest`, `air_time`, and `distance` variables from flights? Give the code showing how to do this in at least three different ways.** 

```{r, echo=TRUE}
library(dplyr)
library(nycflights13)
```
```{r, echo=TRUE, eval=FALSE}
# The regular way:
flights %>% 
  select(dest, air_time, distance)

# Since they are sequential columns in the data set
flights %>% 
  select(dest:distance)

# Not as effective, by removing everything else
flights %>% 
  select(-year, -month, -day, -dep_time, -sched_dep_time, -dep_delay, -arr_time,
         -sched_arr_time, -arr_delay, -carrier, -flight, -tailnum, -origin, 
         -hour, -minute, -time_hour)
```


**5.16 How could one use `starts_with`, `ends_with`, and `contains` to select columns from the `flights` data frame? Provide three different examples in total: one for `starts_with`, one for `ends_with`, and one for `contains`.** 

```{r, echo=TRUE, eval=FALSE}
# Anything that starts with "d"
flights %>% 
  select(starts_with("d"))
# Anything related to delays:
flights %>% 
  select(ends_with("delay"))
# Anything related to departures:
flights %>% 
  select(contains("dep"))
```


**5.17 Why might we want to use the `select` function on a data frame?** To narrow down the data frame, to make it easier to look at. Using `View()` for example.










<!----------------------------------------------------------------------------->
# Lec14 - Thu 3/16: 5MV#3 `group_by()` & 5MV#4 `mutate()`

In ModernDive, LC5.5 thru 5.12 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/5-manip.html#mv3-group-rows-using-group_by">Chapters 5.2.3-5.2.4</a>.

## Discussion

### LC 5.5-5.9

**5.5 What does the standard deviation column in the `summary_temp_by_month` data frame tell us about temperatures in New York City throughout the year?**

```{r, echo=TRUE}
library(dplyr)
library(nycflights13)
```
```{r, echo=TRUE, cache=TRUE}
summary_temp_by_month <- weather %>% 
  group_by(month) %>% 
  summarize(
          mean = mean(temp, na.rm = TRUE),
          std_dev = sd(temp, na.rm = TRUE)
          )
```

```{r, eval=FALSE}
summary_temp_by_month
```
```{r, echo=FALSE}
kable(summary_temp_by_month)
```

The standard deviation is a quantification of **spread** and **variability**. We
see that the period in November, December, and January has the most variation in
weather, so you can expect very different temperatures on different days.

**5.6 What code would be required to get the mean and standard deviation temperature for each day in 2013 for NYC?**

```{r, echo=TRUE}
summary_temp_by_day <- weather %>% 
  group_by(year, month, day) %>% 
  summarize(
          mean = mean(temp, na.rm = TRUE),
          std_dev = sd(temp, na.rm = TRUE)
          )
summary_temp_by_day
```

Note: `group_by(day)` is not enough, because `day` is a value between 1-31. We need to ` group_by(year, month, day)` 



**5.7 Recreate `by_monthly_origin`, but instead of grouping via `group_by(origin, month)`, group variables in a different order `group_by(month, origin)`. What differs in the resulting data set?**

```{r, echo=TRUE, cache=TRUE}
by_monthly_origin <- flights %>% 
  group_by(month, origin) %>% 
  summarize(count = n())
```

```{r, eval=FALSE}
by_monthly_origin
```
```{r, echo=FALSE}
kable(by_monthly_origin)
```

The difference is they are organized/sorted by `month` first, then `origin`


**5.8 How could we identify how many flights left each of the three airports in each of the months of 2013?**

We could summarize the count from each airport using the `n()` function, which *counts rows*.

```{r, echo=TRUE, cache=TRUE}
count_flights_by_airport <- flights %>% 
  group_by(origin, month) %>% 
  summarize(count=n())
```

```{r, eval=FALSE}
count_flights_by_airport
```
```{r, echo=FALSE}
kable(count_flights_by_airport)
```

All remarkably similar!

Note: the `n()` function counts rows, whereas the `sum(VARIABLE_NAME)`
funciton sums all values of a certain numerical variable `VARIABLE_NAME`.


**5.9 How does the `filter` operation differ from a `group_by` followed by a `summarize`?**

* `filter` picks out rows from the original data set without modifying them, whereas
* `group_by %>% summarize` computes summaries of numerical variables, and hence
reports new values.




### LC 5.10-5.12

**5.10 What do positive values of the `gain` variable in `flights` correspond to? What about negative values? And what about a zero value?**

* Say a flight departed 20 minutes late, i.e. `dep_delay=20`
* Then arrived 10 minutes late, i.e. `arr_delay=10`.
* Then `gain = arr_delay - dep_delay = 10 - 20  = -10` is negative, so it "made
up time in the air".

0 means the departure and arrival time were the same, so no time was made up in 
the air. We see in most cases that the `gain` is near 0 minutes.

I never understood this. If the pilot says "we're going make up time in the air"
because of delay by flying faster, why don't you always just fly faster to begin
with?



**5.11 Could we create the `dep_delay` and `arr_delay` columns by simply
subtracting `dep_time` from `sched_dep_time` and similarly for arrivals? Try the
code out and explain any differences between the result and what actually
appears in `flights`?**

No because you can't do direct arithmetic on times. The difference in time between 12:03 and 11:59 is 4 minutes, but `1293-1159 = 134`

**5.12 What can we say about the distribution of `gain`? Describe it in a few
sentences using the plot and the `gain_summary` data frame values.**

Most of the time the gain is a little under zero, most of the time the gain is
between -50 and 50 minutes. There are some extreme cases however!














<!----------------------------------------------------------------------------->
# Lec13 - Wed 3/15: Piping, 5MV#1 `filter()` & 5MV#2 `summarize()`

In ModernDive, LC5.1 thru 5.4 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/5-manip.html">Chapters 5-5.2.2</a>.

## Discussion

### LC 5.1

All the following are the same! 

```{r, eval=TRUE, echo=TRUE}
library(nycflights13)
library(dplyr)
data(flights)
```
```{r, eval=FALSE, echo=TRUE}
# Original in book
not_BTV_SEA <- flights %>% 
  filter(!(dest == "BTV" | dest == "SEA"))

# Alternative way
not_BTV_SEA <- flights %>% 
  filter(!dest == "BTV" & !dest == "SEA")

# Or even
not_BTV_SEA <- flights %>% 
  filter(dest != "BTV" & dest != "SEA")
```


### LC 5.2-5.4

* **5.2 Say a doctor is studying the effect of smoking on lung cancer of a large number of patients who have records measured at five year intervals. He notices that a large number of patients have missing data points because the patient has died, so he chooses to ignore these patients in his analysis. What is wrong with this doctor’s approach?** The missing patients may have died of lung cancer! So to ignore them might seriously **bias** your results! It is very important to think of what the consequences on your analysis are of ignoring missing data! Ask yourself:
    + There is a systematic reasons why certain values are missing? If so, you might be biasing your results!
    + If there isn't, then it might be ok to "sweep missing values under the rug."
* **5.3 Modify the above summarize function to be use the `n()` summary function: `summarize(count=n())`. What does the returned value correspond to?** It corresponds to a count of the number of observations/rows:

```{r, eval=TRUE, echo=TRUE}
data(weather)
weather %>% 
  summarize(count = n())
```

* **5.4 Why doesn’t the following code work? You may want to run the code line by line:**

```{r, eval=FALSE, echo=TRUE}
summary_temp <- weather %>%   
  summarize(mean = mean(temp, na.rm = TRUE)) %>% 
  summarize(std_dev = sd(temp, na.rm = TRUE))
```

Consider the output of only running the first two lines:

```{r, eval=TRUE, echo=TRUE}
weather %>%   
  summarize(mean = mean(temp, na.rm = TRUE))
```

Because after the first `summarize()`, the variable `temp` disappears as it has been collapsed to the value `mean`. So when we try to run the second `summarize()`, it can't find the variable
`temp` to compute the standard deviation of. 




<!----------------------------------------------------------------------------->
# Lec11 - Thu 3/9: 5NG#5 Barplots

In ModernDive, LC4.26 thru 4.37 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/4-viz.html#geombar">Chapters 4.7</a>.

## Discussion

**Note on Wed March 15**: The learning checks originally posted were from the previous version of the book, therefore the discussion below might differ *slightly* 
from what you wrote originally. The above link has been fixed.


### LC 4.26-4.29

* **4.26: Why are histograms inappropriate for visualizing categorical variables?** Histograms are for continuous variables i.e. the horizontal part of each
histogram bar represents an interval, whereas for a categorical variable each
bar represents only one level of the categorical variable.
* **4.27: What is the difference between histograms and barplots?** See above.
* **4.28: How many Envoy Air flights departed NYC in 2013?** Envoy Air is carrier code `MQ` and thus 26397 flights departed NYC in 2013.
* **4.29: What was the seventh highest airline in terms of departed flights from NYC in 2013? How could we better present the table to get this answer quickly.**
What a pain! We'll see in Chapter 5 on Data Wrangling that applying `arrange(desc(n))` will sort this table in descending order of `n`!


### LC 4.30-4.31

* **4.30: Why should pie charts be avoided and replaced by barplots?** In my **opinion**, comparisons using horizontal lines are easier than comparing angles and areas of circles.
* **4.31: What is your opinion as to why pie charts continue to be used?** Legacy?


### LC 4.32-4.37

* **4.32 What kinds of questions are not easily answered by looking at the above figure?** Because the red, green, and blue bars don't all start at 0 (only red does), it makes comparing counts hard.
* **4.33 What can you say, if anything, about the relationship between airline and airport in NYC in 2013 in regards to the number of departing flights?** The different airlines prefer different airports. For example, United is mostly a Newark carrier and JetBlue is a JFK carrier. If airlines didn't prefer airports, each color would be roughly one third of each bar.
* **4.34 Why might the side-by-side barplot be preferable to a stacked barplot in this case?** We can easily compare the different aiports for a given carrier using a single comparison line i.e. things are lined up
* **4.35 What are the disadvantages of using a side-by-side barplot, in general?** Hard to get totals for each airline.
* **4.36 Why is the faceted barplot preferred to the side-by-side and stacked barplots in this case?** Not that different than using side-by-side; depends on how you want to organize your presentation.
* **4.37 What information about the different carriers at different airports is more easily seen in the faceted barplot?** Now we can also compare the different carriers **within** a particular airport easily too. For example, we can read off who the top carrier for each airport is easily using a single horizontal line.








<!----------------------------------------------------------------------------->
# Lec09 - Thu 3/2: 5NG#4 Boxplots

In ModernDive

* Read <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/A-appendixA.html">Appendix A</a>
* LC4.22 thru 4.25 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/4-viz.html#ng4-boxplots">Chapter 4.7</a>


## Discussion

```{r, echo=TRUE}
# Load necessary packages
library(ggplot2)
library(dplyr)
library(nycflights13)

# Load weather data set in nycflights
data(weather)
```

### LC 4.22-4.25

**4.22: What does the dot at the bottom of the plot for May correspond to? Explain what might have occurred in May to produce this point.**

```{r, echo=TRUE, cache=TRUE}
ggplot(data = weather, mapping = aes(x = factor(month), y = temp)) +
  geom_boxplot()
```

It appears to be an outlier. Let's revisit the use of the `filter` command to hone in on it. We want all data points
where the `month` is 5 and `temp<25`

```{r, echo=TRUE, eval=FALSE}
weather %>% 
  filter(month==5 & temp < 25)
```

```{r, echo=FALSE, cache=TRUE}
weather %>% 
  filter(month==5 & temp < 25) %>% 
  kable()
```

There appears to be only one hour and only at JFK that recorded 13.1 F (-10.5 C) in the month of May. This is probably a data entry mistake!
Why wasn't the weather at least similar at EWR (Newark) and LGA (La Guardia)?


**4.23: Which months have the highest variability in temperature? What reasons do you think this is?**

We are now interested in the **spread** of the data. One measure some of you may
have seen previously is the standard deviation. But in this plot we can read off
the Interquartile Range (IQR):

* The distance from the 1st to the 3rd quartiles i.e. the length of the boxes
* You can also think of this as the spread of the **middle 50%** of the data

Just from eyeballing it, it seems

* November has the biggest IQR, i.e. the widest box, so has the most variation in temperature
* August has the smallest IQR, i.e. the narrowest box, so is the most consistent temperature-wise

Here's how we compute the exact IQR values for each month (we'll see this more in depth Chapter 5 of the text):

1. `group` the observations by `month` then
1. for each `group`, i.e. `month`, `summarise` it by applying the summary statistic function `IQR()`, while making sure to skip over missing data via `na.rm=TRUE` then
1. `arrange` the table in `desc`ending order of `IQR`

```{r, echo=TRUE, eval=FALSE}
weather %>% 
  group_by(month) %>% 
  summarise(IQR = IQR(temp, na.rm=TRUE)) %>% 
  arrange(desc(IQR))
```

```{r, echo=FALSE, cache=TRUE}
weather %>% 
  group_by(month) %>% 
  summarise(IQR = IQR(temp, na.rm=TRUE)) %>% 
  arrange(desc(IQR)) %>% 
  kable()
```


**4.24: We looked at the distribution of a continuous variable over a
categorical variable here with this boxplot. Why can’t we look at the
distribution of one continuous variable over the distribution of another
continuous variable? Say, temperature across pressure, for example?**

Because we need a way to group many continuous observations together, say by grouping
by month. For pressure, we have near unique values for pressure, i.e. no groups, so we
can't make boxplots.


**4.25: Boxplots provide a simple way to identify outliers. Why may outliers be easier to identify when looking at a boxplot instead of a faceted histogram?**

In a histogram, the bin corresponding to where an outlier lies may not by high enough for us to see. In a boxplot, they are explicitly labelled separately. 










<!----------------------------------------------------------------------------->
# Lec08 - Wed 3/1: 5NG#3 Histograms

In ModernDive, LC4.14 thru 4.21 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/4-viz.html#histograms">Chapters 4.5-4.6</a>. 

## Discussion

```{r, echo=TRUE}
# Load necessary packages
library(ggplot2)
library(dplyr)
library(nycflights13)

# Load weather data set in nycflights
data(weather)
```


### LC 4.14-4.17

**4.14: What does changing the number of bins from 30 to 60 tell us about the distribution of temperatures?**

```{r, echo=TRUE, cache=TRUE}
ggplot(data = weather, aes(x = temp)) +
  geom_histogram(bins = 30)
ggplot(data = weather, aes(x = temp)) +
  geom_histogram(bins = 60)
```

The distribution doesn't change much. But by refining the bid width, we see
that the temperature data has a high degree of accuracy. What do I mean by
accuracy? Looking at the `temp` variabile by `View(weather)`, we see that the
precision of each temperature recording is 2 decimal places.


**4.15: Would you classify the distribution of temperatures as symmetric or
skewed?** 

It is rather symmetric, i.e. there are no **long tails** on only one side of the distribution

**4.16: What would you guess is the "center" value in this distribution?  Why
did you make that choice?**

The center is around 55&deg;F. By running the `summary()` command, we see
that the mean and median are very similar. In fact, when the distribution is
symmetric the mean equals the median.

**4.17: Is this data spread out greatly from the center or is it close? Why?**

This can only be answered relatively speaking! Let's pick things to be relative to Seattle, WA temperatures:

![alt text](http://dssni5kiwicxb.cloudfront.net/climate/Washington/Seattle%20Sea-Tac%20Airport/temp.png)

While, it appears that Seattle weather has a similar center of 55&deg;F, its
temperatures are almost entirely between 35&deg;F and 75&deg;F for a range of
about 40&deg;F. Seattle temperatures are much less spread out than New York i.e.
much more consistent over the year. New York on the other hand has much colder
days in the winter and much hotter days in the summer. Expressed differently,
the middle 50% of values, as delineated by the interquartile range is 30&deg;F:

```{r, echo=TRUE, message=FALSE, warning=FALSE}
IQR(weather$temp, na.rm=TRUE)
```

```{r, echo=TRUE, message=FALSE, warning=FALSE}
summary(weather$temp)
```


### LC 4.18-4.21

**4.18: What other things do you notice about the faceted plot above? How does a
faceted plot help us see relationships between two variables?**

* Certain months have much more consistent weather (August in particular), while
others have crazy variability like January and October, representing changes in the seasons.
* The two variables we are see the relationship of are `temp` and `month`.
    
**4.19: What do the numbers 1-12 correspond to in the plot above? What about 25, 50, 75, 100?**

* While month is technically a number between 1-12, we're viewing it as a categorical variable here. Specifically an **ordinal categorical** variable since there is a ordering to the categories
* 25, 50, 75, 100 are temperatures

**4.20: For which types of datasets would these types of faceted plots not work well in comparing relationships between variables? Give an example describing the variability of the variables and other important characteristics?**

Having histograms split by day would not be great:

* We'd have 365 facets to look at. Way to many.
* We don't really care about day-to-day fluctuation in weather so much, but maybe more week-to-week variation. We'd like to focus on seasonal trends.

**4.21: Does the `temp` variable in the `weather` data set have a lot of variability? Why do you say that?**

Again, like in LC 4.17, this is a relative question. I would say yes, because in New York City, you have 4 clear seasons with different weather. Whereas in Seattle WA and Portland OR, you have two seasons: summer and rain!










<!----------------------------------------------------------------------------->
# Lec07 - Mon 2/27: 5NG#2 Linegraphs

In ModernDive, LC4.9 thru 4.13 in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/4-viz.html#linegraphs">Chapter 4.4</a>. **Hint**: For LC4.10, Google "NYC Timezone" and note the number next to UTC. UTC stands for <a target="_blank" class="page-link" href="https://www.timeanddate.com/time/aboututc.html">Coordinated Universal Time</a>.


## Discussion

* **LC4.9**: Take a look at both the `weather` and `early_january_weather` data frames by running `View(weather)` and `View(early_january_weather)` in the console. In what respect do these data frames differ? *The rows of `early_january_weather` are a subset of `weather`.*
* **LC4.10**: The `weather` data is recorded hourly. Why does the `time_hour` variable correctly identify the hour of the measurement whereas the hour variable does not? *Because to uniquely identify an hour, we need the `year`/`month`/`day`/`hour` sequence, whereas there are only 24 possible `hour`'s. Note that in the case of `weather`, there is a timezone bug: the `time_hour` variable is off by 5 hours from the `year`/`month`/`day`/`hour` sequence, since the Eastern Time Zone is 5 hours off UTC.*
* **LC4.11**: Why should line-graphs be avoided when there is not a clear ordering of the horizontal axis? *Because lines suggest connectedness and ordering.*
* **LC4.12**: Why are line-graphs frequently used when time is the explanatory variable? *Because time is sequential: subsequent observations are closely related to each other.*
* **LC4.13**: Plot a time series of a variable other than temp for Newark Airport in the first 15 days of January 2013. *Humidity is a good one to look at, since this very closely related to the cycles of a day.*


```{r, echo=TRUE, cache=TRUE}
data(weather)
early_january_weather <- weather %>% 
  filter(origin == "EWR" & month == 1 & day <= 15)
ggplot(data = early_january_weather, aes(x = time_hour, y = humid)) +
  geom_line()
```










<!----------------------------------------------------------------------------->
# Lec06 - Fri 2/24: 5NG#1 Scatterplots

In ModernDive, LC4.1 thru 4.8 which include in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/4-viz.html">Chapter 4</a>:

* Review Readings: Start of Chapter 4 to 4.2
* Chapter 4.3 to 4.3.1: 5NG#1 Scatterplots. Drill down on `geom_point()`
* Chapter 4.3.2: Two ways for dealing with **overplotting**:
    1. `alpha` to control **transparency**
    1. `geom_jitter()`: a variation of `geom_point()` where we add a little **jitter** (i.e. random noise) to the points to break log-jams

## Discussion

Load necessary data and packages:

```{r, echo=TRUE}
library(dplyr)
library(ggplot2)
library(nycflights13)
```
```{r, echo=TRUE, cache=TRUE}
data(flights)
all_alaska_flights <- flights %>% 
  filter(carrier == "AS")
```

**LC4.1**: `flights` includes all flights, whereas `all_alaska_flights` only
includes Alaska Airlines flights. 


**LC 4.2-4.6**:

```{r, echo=TRUE, cache=TRUE}
ggplot(data=all_alaska_flights, aes(x = dep_delay, y = arr_delay)) + 
  geom_point()
```

* **4.2**: What are some practical reasons why `dep_delay` and `arr_delay` have a positive relationship? *The later a plane departs, typically the later it will arrive.*
* **4.3**: What does (0, 0) correspond to from the point of view of a passenger on an Alaskan flight?  Why do you believe there is a cluster of points near (0, 0)? *The point (0,0) means no delay in departure and arrival. From the passenger's point of view, this means the flight was on time. It seems most flights are at least close to being on time.*
* **4.4**: Create a similar plot, but one showing the relationship between departure time and departure delay. What hypotheses do you have about the patterns you see? *We now put `dep_time` as the `x`-aesthetic and `dep_delay` as the `y`-aesthetic*

```{r, echo=TRUE, cache=TRUE}
ggplot(data=all_alaska_flights, aes(x = dep_time, y = dep_delay)) + 
  geom_point()
```

**Hint:** Look at Alaska Airlines' route map. In fact, there are only two
flights paths: Flights 7 and 11 flying from Newark (EWR) to Seattle (SEA).

![alt text](assets/figure/alaska_airlines_map.png)


**LC 4.7-4.8**:

```{r, cache=TRUE}
ggplot(all_alaska_flights, aes(x = dep_delay, y = arr_delay)) + 
  geom_point()
ggplot(all_alaska_flights, aes(x = dep_delay, y = arr_delay)) + 
  geom_point(alpha = 0.2)
```

* **4.7**: Why is setting the `alpha` argument value useful with scatter-plots? *It thins out the points so we address over-plotting. But more importantly it hints at the (statistical) **density** and **distribution** of the points: where are the points concentrated, where do they occur. We will see more about densities and distributions in Chapter 6 when we switch gears to statistical topics.*
* **4.8**: After viewing the above plot, give a range of arrival delays and departure delays that occur most frequently?  How has that region changed compared to when you observed the same plot without the `alpha = 0.2` set in lower plot? *The lower plot suggests that most Alaska flights from NYC depart between 12 minutes early and on time and arrive between 50 minutes early and on time.*



<!--
1. Compare the "transparency" vs "jitter" approach to dealing with over-plotting above. In this case, which do you prefer?
-->

```{r, echo=FALSE}
# ggplot(alaska_flights, aes(x = dep_delay, y = arr_delay)) + 
#   geom_point(alpha = 0.2)
# ggplot(alaska_flights, aes(x = dep_delay, y = arr_delay)) + 
#   geom_jitter(width = 30, height = 30)
```











<!----------------------------------------------------------------------------->
# Lec05 - Thu 2/23: More 5NG

**LC1-5** Consider the following data in tidy format:

```{r}
library(dplyr)
simple <-
  data_frame(
    A = c(1, 2, 3, 4),
    B = c(1, 2, 3, 4),
    C = c(3, 2, 1, 2),
    D = c("Hot", "Hot", "Cold", "Cold")
  )
simple %>% kable(format="markdown")
```

Letting

* the `x`-axis correspond to variable `A`
* the `y`-axis is variable `B`

draw using pen & paper the 5 graphics below:

1. A scatter plot
1. A scatter plot where the `color` of the points corresponds to `D`
1. A scatter plot where the `size` of the points corresponds to `C`
1. A line graph
1. A line graph where the `color` of the line corresponds to `D`


**Reach for the Stars #1:** A little ambitious right now, but see if you can tweak the code below to
create baby's first `ggplot2` graphic, graphic #1 above: just the scatter plot. I suggest you:

1. Create a new `.R` script file
1. Cut and paste the code below
1. Tweak the code in the `ggplot()` function from your Editor (not directly in console)

```{r, eval=FALSE, echo=TRUE}
library(dplyr)
library(ggplot2)

simple_ex <-
  data_frame(
    A = c(1, 2, 3, 4),
    B = c(1, 2, 3, 4),
    C = c(3, 2, 1, 2),
    D = c("Hot", "Hot", "Cold", "Cold")
  )
View(simple_ex)

ggplot(data=DATASETNAME, mapping=aes(x=VARIABLENAME, y=VARIABLENAME)) +
  geom_point()
```


**Reach for the Stars #2:** Even more ambitious right now, but see if you can tweak the same code to make graphic #2 above: a scatter plot where the `color` of the points corresponds to `D`. Hint:

* open the help file for `geom_point` by running `?geom_point` in the console
* scroll down to the *Aesthetics* section.

## Discussion

**LC1-5**: Chalk Talk

**Reach for the Stars #1:**

```{r, echo=FALSE}
library(dplyr)
library(ggplot2)

simple_ex <-
  data_frame(
    A = c(1, 2, 3, 4),
    B = c(1, 2, 3, 4),
    C = c(3, 2, 1, 2),
    D = c("Hot", "Hot", "Cold", "Cold")
  )
```


```{r, echo=TRUE}
ggplot(data=simple_ex, mapping=aes(x=A, y=B)) +
  geom_point()
```

**Reach for the Stars #2:**

```{r, echo=TRUE}
ggplot(data=simple_ex, mapping=aes(x=A, y=B, color=D)) +
  geom_point()
```

**Notice**:

1. We simply added `color=D` in the `aes()`thetic mapping statement!
1. How Cold gets mapped to red and Hot to blue. Computers don't know one color
represents heat better than another! How do you change these colors? We'll see later; let's keep things simple for now







<!----------------------------------------------------------------------------->
# Lec04 - Wed 2/22: 5NG

Based on the 5NG examples in today's slides

* **Learning Check 1**: Following the example of Napoleon's march, identify the elements of the Grammar of Graphics:
    1. identify the `data` variables being displayed and what type of variable they are
    1. identify the `aes()`thetic attribute of the `geom_`etric object the above `data` variables are being mapped to
* **Learning Check 2**: Answer the following questions:
    1. Does spending more on a movie yield higher IMDB ratings?
    1. Why are there drops in the number of flights?
    1. What are the smallest and largest visible heights and what do you think of them? Also, think of one graph improvement to better convey information about SF OkCupid users.
    1. Click <a target="_blank" class="page-link" href="http://www.datavizcatalogue.com/methods/images/anatomy/box_plot.png">here</a> for an explanation of boxplots. About what proportion of manual car models sold between 1984 and 2015 got 20 mpg or worse mileage?
    1. About how many babies were named "Hayden" between 1990-2014?
    
## Discussion

```{r, include=FALSE}
library(tidyverse)
library(lubridate)
library(knitr)
library(stringr)

library(nycflights13)
library(ggplot2movies)
library(okcupiddata)
library(babynames)
library(fueleconomy)
knitr::opts_chunk$set(cache=TRUE)
```

### 5NG#1: Scatterplot

```{r}
# Scatterplot i.e. bivariate plot
movies <- movies %>% 
  select(title, budget, rating)  

ggplot(data=movies, aes(x=budget, y=rating)) +
  geom_point() +
  labs(x="Movie Budget", y="IMDB Rating", title="IMDB Rating vs Budget")
```

Let's look at a random sample of 3 of the movies:

```{r}
# Scatterplot i.e. bivariate plot
movies %>% 
  filter(!is.na(budget)) %>% 
  sample_n(3) %>% 
  kable()
```

**Both variables are numerical**. Here are the components of the Grammar of Graphics:

`data` variable | `aes()`thetic attribute  | `geom_`etric object
------------- | ------------- | -------------
`budget` | `x` | `point` 
`rating` | `y` | `point` 

**Question: Does spending more on a movie yield higher IMDB ratings?**

```{r}
ggplot(data=movies, aes(x=budget, y=rating)) +
  geom_point() +
  labs(x="Movie Budget", y="IMDB Rating", title="IMDB Rating vs Budget") +
  geom_smooth(method="lm", se=FALSE)
```




### 5NG#2: Linegraph

```{r}
# Line graph
flights <- flights %>% 
  mutate(date=ymd(paste(year, month, day, sep="-"))) %>% 
  filter(month==1) %>% 
  group_by(date) %>% 
  tally()
  
ggplot(data=flights, aes(x=date, y=n)) + 
  labs(x="Date", y="Number of Flights", title="Number of Daily Flights from NYC in Jan 2013") +
  geom_line()
```


Let's look at a random sample of 3 of the dates:

```{r}
# Scatterplot i.e. bivariate plot
flights %>% 
  sample_n(3) %>% 
  kable()
```

**Both variables are numerical (dates are technically numerical since they are an abstraction of time)**. Here are the components of the Grammar of Graphics:

`data` variable | `aes()`thetic attribute  | `geom_`etric object
------------- | ------------- | -------------
`date` | `x` | `line` 
`n` | `y` | `line` 

**Note**: Why did we use `line` as the `geom_`etric object? Because lines suggest sequence/relationship, and points don't.

**Question: Why are there drops in the number of flights?** 2013/01/14 was a Monday.

```{r}
ggplot(data=flights, aes(x=date, y=n)) + 
  labs(x="Date", y="Number of Flights", title="Number of Daily Flights from NYC in Jan 2013") +
  xlim(as.Date(c("2013-01-14", "2013-01-20"))) +
  geom_line()
```


### 5NG#3: Histogram

```{r}
# Histogram
profiles <- profiles %>% 
  select(sex, height)

ggplot(data=profiles, aes(x=height)) +
  geom_histogram() +
  labs(x="height (in inches)", y="count", title="Heights of San Francisco OkCupid Users")
```

Let's look at a random sample of 3 of the users:

```{r}
# Scatterplot i.e. bivariate plot
profiles %>% 
  sample_n(3) %>% 
  kable(row.names=FALSE)
```

**Height is numerical**. Here are the components of the Grammar of Graphics:

`data` variable | `aes()`thetic attribute  | `geom_`etric object
------------- | ------------- | -------------
`height` | `x` | `histogram` 


**Note**: We'll see later there is no `y` aesthetic here, because there is
no explicit variable that maps to it, but rather it is computed internally.

**Question: What are the smallest and largest visible heights and what do you think of them? Also, think of one graph improvement to better convey information about SF
OkCupid users.**

```{r}
ggplot(data=profiles, aes(x=height)) +
  geom_histogram(binwidth = 1) +
  facet_wrap(~sex, nrow=1) +
  coord_cartesian(xlim=c(50, 80)) +
  labs(x="height (in inches)", y="count", title="Heights of San Francisco OkCupid Users")
```


### 5NG#4: Boxplot

```{r}
# Boxplot
vehicles <- vehicles %>% 
  mutate(
    trans2 = ifelse(str_sub(trans, 1, 1) == "M", "Manual", "Automatic"),
    name = paste(year, make, model)
    ) %>% 
  select(name, trans2, hwy) %>% 
  rename(trans=trans2)

ggplot(data=vehicles, aes(x=trans, y=hwy)) +
  geom_boxplot() +
  labs(y="Highway Mileage (miles/gallon)", x="Transmission Type", title="Highway Mileage of all Car Models 1984-2015") +
  coord_cartesian(ylim=c(5, 45))
```

Let's look at a random sample of 3 of the car year/make/model matchings:

```{r}
# Scatterplot i.e. bivariate plot
vehicles %>% 
  sample_n(3) %>% 
  kable()
```

**`trans` type is categorical, whereas `hwy` is numerical**. Here are the components of the Grammar of Graphics:

`data` variable | `aes()`thetic attribute  | `geom_`etric object
------------- | ------------- | -------------
`trans` | `x` | `boxplot` 
`hwy` | `y` | `boxplot` 

**Question: About what proportion of manual car models sold between 1984 and 2015 got 20 mpg or worse mileage?** Answer: 25%



### 5NG#5: Bar Plot

```{r}
# Bar Chart
babynames <- babynames %>% 
  mutate(decade = round(year / 10) * 10) %>% 
  filter(name=="Hayden" | name == "Carlos" | name == "Ethan") %>% 
  filter(decade >= 1990) %>% 
  group_by(name) %>% 
  summarise(n=sum(n))
  
ggplot(data=babynames, aes(x=name, y=n)) +
  geom_bar(stat="identity") +
  labs(x="Name", y="Count", title="Name Counts since 1990")
```


Let's look at all the data:

```{r}
# Scatterplot i.e. bivariate plot
babynames %>% 
  kable()
```

**Name is categorical**. Here are the components of the Grammar of Graphics:

`data` variable | `aes()`thetic attribute  | `geom_`etric object
------------- | ------------- | -------------
`name` | `x` | `bar` 
`n` | `y` | `bar` 


**Question: About how many babies were named "Hayden" between 1990-2014?** Answer: 1e+05 is R's shorthand notation for $1 \times 10^5 = 10,000$. To help me remember exponents, I just memorize that $1\times 10^6 = 1,000,000$ i.e. one million.

```{r, include=FALSE}
knitr::opts_chunk$set(cache=FALSE)
```










<!----------------------------------------------------------------------------->
# Lec03 - Mon 2/20: Tidy Data

Do the 16 Learning Checks in <a target="_blank" class="page-link" href="https://rudeboybert.github.io/ModernDive/3-tidy.html">Chapter 3 of ModernDive: Tidy Data</a>. You do not need to submit these.

## Discussion

**3.1** 3.2 is an example!

**3.2** Since there are three variable at play (Date, Price, Stock Name), there should be three columns!

```{r}
library(tidyverse)
data.frame(
  Date = as.Date('2009-01-01') + 0:4,
  Boeing = paste("$", c("173.55", "172.61", "173.86", "170.77", "174.29"), sep=""),
  Amazon = paste("$", c("174.90", "171.42", "171.58", "173.89", "170.16"), sep=""),
  Google = paste("$", c("174.34", "170.04", "173.65", "174.87", "172.19") ,sep="")
) %>% 
  gather(`Stock Name`, Price, -Date) %>% 
  kable()
```

**3.3 What does any ONE row in thd `flights` dataset refer to?**  Data on a flight. Not a flight path! Example: 

* a flight path would be United 1545 to Houston
* a flight would be United 1545 to Houston *2013/1/1 at 5:15am*


**3.4 What are some examples in this dataset of categorical variables? What makes them different than quantitative variables?**

Hint: Type `?flights` in the console to see what all the variables mean!

* Cateogorical:
    + `carrier` the company
    + `dest` the destination
    + `flight` the flight number. Even though this is a number, its simply a label. Example United 1545 isn't "less than" United 1714
* Quantitative:
    + `distance` the distance in miles
    + `time_hour` time

**3.5 What does `int`, `dbl`, and `chr` mean in the output above?** 

* `int`: integer. Used to count things i.e. a discrete value. Ex: the # of cars parked in a lot
* `dbl`: double. Used to measure things. i.e. a continuous value. Ex: your height in inches
* `chr`: character. i.e. text


**3.6 & 3.7** 19 columns (variables) and 336,776 rows (observations i.e. flights)

**3.8** `weather`, `planes`, `airports`, `airlines` data sets.

The observational units, i.e. what each row corresponds to:

* `weather`: weather at a given `origin` (EWR, JFK, LGA) for a given hour i.e. `year`, `month`, `day`, `hour`
* `planes`: a physical aircraft
* `airports`: an airport in the US
* `airlines`: an airline company

**3.9** See `?airports` help file

**3.10** Identification Variables

* In the `weather` example in LC3.8, the combination of `origin`, `year`, `month`, `day`, `hour`  are identification variables as they identify the observation in question.
* Anything else pertains to observations: `temp`, `humid`, `wind_speed`, etc.

**3.11 What are common characteristics of “tidy” datasets?** Described in Lecture slides.

**3.12 What makes “tidy” datasets useful for organizing data?** Organized way of viewing data. We'll see later that this format is required for the `ggplot2` and `dplyr` packages for data visualization and manipulation.

**3.13** There are 2 variables below, but what does each row correspond to? We don't know b/c there are no identification variables.

```{r}
students <- c(4, 6)
faculty <- c(2, 3)
data_frame("students" = students, "faculty" = faculty) %>% 
  kable()
```

**3.14** We need at least a third variable to identify the observations. For example a variable "Department".

**3.15** Sociology example

* Each row is a member of a university.
* Variables are the columns
* `TRUE` and `FALSE`. This is called a logical variable AKA a boolean variable. `1` and `0` can also be used

**3.16** We can easily `_join` them with other data sets! For example, can we join the `flights` data with the `planes` data?  We'll see this more in Chapter 4!



****









<!----------------------------------------------------------------------------->
# Lec02 - Thu 2/16: R Packages

You will be getting your first experience with:

* RStudio: i.e. The Dashboard
* R Packages: Extending the functionality
* `View()`: A command for viewing your data
* R Scripts: Text files to save your work
* Answering questions with data. In this case: baby name popularity


## Setting Up

As described in today's lecture slides: In RStudio (not DataCamp):

1. Install the `ggplot2`, `dplyr`, and `babynames` packages.
1. Load the `ggplot2`, `dplyr`, and `babynames` packages.


## `View()` Your Data

Load the `babynames` dataset in the RStudio viewer by running the following in 
the console. You should get in the habit of **always** `View()`ing your data first!

```{r, eval=FALSE}
View(babynames)
```

* Scroll through the viewer to get an overall feel for your data:
* Filter your data in the viewer
    + Click on the **Filter** button
    + Click in the white boxes under the variable names and
        + Play with any sliders for numerical variables: year, n, prop
        + Enter in values to view subsets of rows: sex, name


## R Scripts

There are two ways to run commands in the R console: Either

1. Typing them directly in the console and pressing enter (as you just did).
1. Saving them in a `.R` *R Script* and passing them to the console.

Do the following:

* In RStudio menu bar -> File -> New File -> R Script
* Save the file as `babynames`. Note:
    + A file extension `.R` gets added: `babynames.R`
    + You should see `babynames.R` in the File panel of RStudio:
* Cut/paste the contents of the grey block below into `babynames.R` and save it again.
* Run all the code in the console by highlighting it and pressing
    + Mac users: COMMAND+ENTER
    + PC users: CTRL+ENTER
* Comment on what you see


```{r, eval=FALSE}
# This bit of code loads packages:
library(ggplot2)
library(dplyr)
library(babynames)

# The code below shows the popularity trend for the name "Jeffrey" amongst 
# males. You do not need to understand this code for now; Just run it.
baby_name <- "Jeffrey"
baby_sex <- "M"

single_name <- babynames %>% 
  filter(name==baby_name & sex==baby_sex)

ggplot(data=single_name, aes(x=year, y=prop)) + 
  geom_line() +
  xlim(c(1880, 2014)) +
  ylim(c(0, NA)) +
  labs(x="Year", y="Proportion", title = paste("Prop of", baby_sex, "Named", baby_name))
```


## Today's Exercise

Investigate your hypothesized names that are "modern", "old-fashioned", and "back in vogue" by

* Changing **only** what gets assigned to
    + `baby_name`
    + `baby_sex`
* Running the appropriate lines of code in the console.



