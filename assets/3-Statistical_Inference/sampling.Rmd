---
title: "Sampling"
author: "Albert Y. Kim"
date: "Wed Nov 2, 2016"
output: ioslides_presentation
---

<style>
h2 { 
 color: #3399ff;		
}
h3 { 
 color: #3399ff;		
}
slides > slide.backdrop {
  background: white;
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(knitr)
library(mosaic)
```



## Recall

The `mosaic` package has the following 4 functions will give us (most of) the random simulation tools we need. We've seen

1. `rflip()`: Flip a coin
1. ~~`shuffle()`: Shuffle a set of values~~
1. `do()`: Do the same thing many, many, many times
1. ~~`resample()`: the swiss army knife of functions~~

> * Today we do `shuffle()` and `resample()`





## Key Distinction

A *huge* distinction in types of sampling:

1. Sampling **with** replacement
1. Sampling **without** replacement

In the Powerball analogy, this translates to:

> 1. After picking a ball, putting it back into the machine
> 1. After picking a ball, leaving it out. What the lottery does in real life.




## Shuffling AKA Permuting

Shuffling AKA re-ordering AKA **permuting** are all synonyms. I'm going to use
all three terms interchangeably. 

Run the following in your console:

```{r, eval=FALSE}
library(mosaic)
# Define a vector fruit
fruit <- c("apple", "orange", "mango")

# Do this multiple times:
shuffle(fruit)
```




## Shuffling AKA Permuting

This works with the `do()` operator...

```{r, eval=FALSE}
do(5) * shuffle(fruit)
```

... as well as within a `mutate()`

```{r, eval=FALSE}
example_data <- data_frame(
  name = c("Ilana", "Abbi", "Hannibal"),
  fruit = c("apple", "orange", "mango")
)

# Run this multiple times: 
example_data %>% 
  mutate(fruit = shuffle(fruit))
```



## Resampling

At its most basic, `resample()` resamples the input vector **with** replacement. Run this in the console multiple times:

```{r, eval=FALSE}
resample(fruit)
```

> * You can get the same fruit all three times i.e. sampling with replacement
> * `resample()` has default settings that we can set to fit our needs; it is a swiss army knife.
> * Let's unpack the defaults:




## Resampling

```{r, eval=FALSE}
resample(x=fruit, size=length(x), replace=TRUE, 
         prob=rep(1/length(x), length(x)) )
```

> * `x` is the input. In this case `fruit`.
> * `size`: size of output vector. By default the same size as `x`.
> * `replace`: Sample **with** or **without** replacement. By default with replacement.
> * `prob`: Probability of sampling each input value. By default, equal probability
> * Run `rep(1/length(fruit), length(fruit))` in your console. In the case of
`fruit`, this vector is `rep(1/3, 3)` i.e. repeat 1/3 three times.




## Learning Checks

1. Rewrite `rflip(10)` using the `resample()` command. Hint: `coin <- c("H", "T")`
1. Rewrite the `shuffle()` command by changing the minimal number of default settings of `resample()`. Test this on `fruit`
1. Write code that will allow you to generate a sample of 15 fruit without replacement.
1. Write code that will allow you to generate a sample of 15 fruit with replacement.
1. What's the fastest way to do the above 5 times? Write it out




## The Lady Tasting Tea

> * In the early 1900's, Ronald Fisher (a statistician) met a woman who claimed to be able to tell by tasting whether the tea or the milk was added first to a cup.
> * Fisher called BS and thought she was really only guessing.
> * So he set up a **blinded experiment**:
> * They provided the lady with 8 randomly ordered cups: 4 prepared by first adding milk, 4 prepared by first adding the tea.
> * She got all 8 right.






```{r, message=FALSE, eval=FALSE, echo=FALSE}

```


