---
title: "Standard Errors"
author: "Albert Y. Kim"
date: "Wed Nov 30, 2016"
output:
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    smooth_scroll: false
---

Let's revisit the OkCupid profile data. Run the following in your console:

```{r, echo=TRUE, message=FALSE}
library(mosaic)
library(dplyr)
library(ggplot2)

library(okcupiddata)
data(profiles)

# Added line: let's remove all users (i.e. rows) who did not list a height. is.na() returns
# TRUE if missing, so we want those that are NOT missing.
profiles <- profiles %>% 
  filter(!is.na(height))
```

We take many, many, many samples of size 5 and then take the sample mean:

```{r, echo=TRUE, message=FALSE, eval=TRUE, cache=TRUE}
n <- 5
samples_5 <- do(10000) * 
  mean(resample(profiles$height, size=n, replace=TRUE))
samples_5 <- samples_5 %>% 
  as_data_frame() 
```

We take many, many, many samples of size 50 and then take the sample mean:

```{r, echo=TRUE, message=FALSE, eval=TRUE, cache=TRUE}
n <- 50
samples_50 <- do(10000) * 
  mean(resample(profiles$height, size=n, replace=TRUE))
samples_50 <- samples_50 %>% 
  as_data_frame() 
```


## Learning Checks

1. Explicity compute the **standard error** when taking samples of size `n=5` and `n=50`. 
2. Discuss with your peers **why** they matter in any study that involves some kind of sampling.


#### LC1

**In General**: The standard error is the standard deviation of the point estimate. In this case, it is the value that quantifies how much the sample means vary by.

**Computation**: It is the standard deviation of our 10000 sample means:

```{r, echo=TRUE, message=FALSE, eval=TRUE}
samples_5 %>% 
  summarise(SE = sd(mean))
samples_50 %>% 
  summarise(SE = sd(mean))
```

**Results**:

1. The SE with `n=50` is smaller i.e.
1. The sample mean $\overline{x}$ are less variable when `n=50`
1. The sample mean $\overline{x}$ is more precise when `n=50`
1. Our estimates are better when `n=50`

**Visualization**: 

**Recall**: The sampling distribution is the distribution of the point estimate:

```{r, echo=FALSE, message=FALSE, warning=FALSE, eval=TRUE, fig.height=9/2, fig.width=16/2}
samples_5 <- samples_5 %>% 
  mutate(n="n=5")

samples_50 <- samples_50 %>% 
  mutate(n="n=50")

samples <- bind_rows(
  samples_5, samples_50
)

ggplot(samples, aes(x=mean)) +
  facet_wrap(~n) + 
  geom_histogram(binwidth = 1) +
  xlim(c(40,90))
```


#### LC2

Standard errors matter because they quantify the uncertainty around your estimate due to sampling. i.e. how precise are your results.
