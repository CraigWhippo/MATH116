
---
title: "Problem Set 03"
author: "WRITE YOUR NAME HERE"
date: "Due Friday, October 7, 2016"
output:
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    smooth_scroll: false
---



## Please Indicate

* Who you collaborated with. If no one, please indicate so: 
* Approximately how much time did you spend on this problem set: 
* What, if anything, gave you the most trouble: 



## Tips

* Knit this file once first to read the questions.
* Remember, pictures are worth a thousand words. Your responses should be a
combination of written analysis/interpretation and graphics.
* You will need to use Google a little to learn some background and for
investigations, as any good data scientist would.
* **I can't emphasize this enough**: Look at and explore your data with the 
`View()` command and
    + play with the Filter button 
    + sort each variable in increasing and decreasing order by clicking the arrow
    next to the variable name
* The above was a mantra on my analyst team at Google: Always stay close to your
data.



```{r, echo=TRUE, message=FALSE}
# Do not modify any code in this block. You need to run it once in your console 
# to load all the necessary packages, but do not change anything.
library(ggplot2)
library(dplyr)
library(Quandl)
library(lubridate)
Quandl.api_key("izVwTt9m5VoEe7TsEzdr")
```



## Question 1: Bitcoin and Gold

Imagine you are working for a foreign exchange company. You are presented with a
data set `currencies` (which is loaded in the code block) below, which consists
of data on two forms of tradable currency: bitcoin and gold. Give these pages a read:

* [Bitcoin](https://www.quandl.com/data/BAVERAGE/USD)
* [Gold](https://www.quandl.com/data/BUNDESBANK/BBK01_WT5511)

```{r, echo=TRUE}
bitcoin <- 
  Quandl("BAVERAGE/USD", start_date="2013-01-01", end_date="2016-01-01") %>% 
  mutate(type="bitcoin", date=ymd(Date)) %>%
  rename(price=`24h Average`) %>% 
  select(type, date, price) 

# Get gold data off quandl.com
gold <- 
  Quandl("BUNDESBANK/BBK01_WT5511", start_date="2013-01-01", end_date="2016-01-01") %>% 
  mutate(type="gold", date=ymd(Date)) %>%
  rename(price=Value) %>% 
  select(type, date, price)

# Combine bitcoin and gold data frames into a single one: currencies
currencies <- bind_rows(bitcoin, gold) %>%
  group_by(type) %>%
  arrange(type, date) %>% 
  mutate(percent_diff = 100*(price-lag(price))/lag(price)) %>% 
  tbl_df()
```

#### a)

Your boss wants to know: "You took Intro to Statistical and Data Sciences right? Give me an
executive summary of trends in these two forms of currency."

**Solution**: Overall, while gold seems to be trending down, it is much more 
stable and fluctuates less. Bitcoin has definitely not recovered from its peak 
value in late 2013. In fact, on November 19, 2013, the value of a bitcoin on the
Mt. Gox exchange soared after a United States Senate committee hearing was told
by the FBI that virtual currencies are a legitimate financial service.

```{r, fig.height=3, fig.width=5}
# Write your code below:
ggplot(data=currencies, aes(x=date, y=price, col=type)) + 
  geom_line()
```


#### b)

Your boss wants to know: "So we got an investor who has no stomach for 
volatility in currency prices; they like a nice stable currency to park their
money in and not worry about it. What should they invest in?"

**Solution**: the variable `percent_diff` really highlights this trend. It is
clear that gold is wayyyyyy less volatile than bitcoin. i.e. invest in bitcoin
only if you have the stomach for it.

```{r, warning=FALSE, fig.height=3, fig.width=5}
# Write your code below:
ggplot(data=currencies, aes(x=date, y=percent_diff, col=type)) + 
  geom_line()
```

`percent_diff` is computed as follows:

$$
\text{% difference} = \frac{\text{Price Today} - \text{Price Yesterday}}{\text{Price Yesterday}} \times 100 \%
$$

i.e. you follow these steps:

* take the **absolute difference/change** in price $\text{Price Today} - \text{Price Yesterday}$
* **rescale** it by dividing by the original price $\text{Price Yesterday}$
* then convert to a percentage



#### STOP

And observe. It is now the start of week 6, and only now do we see our first formula.
Recall the choice we took for this intro-level class:

If we're going to remove this...            |  We need this to fill the void...
:-------------------------:|:-------------------------:
<img src="../figure/formulas.png" alt="Drawing" style="width: 300px;"/>   |  <img src="../figure/coding.jpg" alt="Drawing" style="width: 300px;"/> 

This emphasizes another important point:

* **statistics is not math**
* **statistics uses math** as a tool to answer questions about the world using data, like in physics/econ/bio.





#### c)

Your boss wants to know: "What day did bitcoin lose the most value in one day?
What was a possible cause?"

**Solution**: Running `View(currencies)` and then sorting by `perc_diff` we see that on December 6, 2013 lost 35.96% of its value **in one day**. 

Let's use a popular search engine called Google to investigate. If you search "bitcoin december 2013", one of the links is [this](http://www.fool.com/investing/general/2013/12/21/what-made-the-december-bitcoin-crash-different.aspx).







## Question 2: Cheese and Milk Production

Imagine you are working for the US Department of Agriculture. You want to
compare milk and cheese production in the United States since 1925 using the
following data:

* [Cheese](https://www.quandl.com/data/USDANASS/NASS_CHEESEPRODUCTIONMEASUREDINLB)
* [Milk](https://www.quandl.com/data/NASS_MILKPRODUCTIONMEASUREDINLB)

```{r, echo=TRUE}
# Get cheese data off quandl.com
cheese <- 
  Quandl("USDANASS/NASS_CHEESEPRODUCTIONMEASUREDINLB", start_date="1925-01-01") %>% 
  mutate(type="cheese", date=ymd(Date), value=Value) %>%
  select(type, date, value) 

# Get milk data off quandl.com
milk <- 
  Quandl("USDANASS/NASS_MILKPRODUCTIONMEASUREDINLB", start_date="1925-01-01") %>% 
  mutate(type="milk", date=ymd(Date), value=Value) %>%
  select(type, date, value) 

# Combine cheese and milk into a single one
food <- bind_rows(cheese, milk) %>% 
  tbl_df()
```


#### a)

Between cheese and milk, relatively speaking, which agricultural good has seen 
the bigger overall increases in production?

```{r, fig.height=3, fig.width=5}
# Write your code below:
ggplot(data=food, aes(x=date, y=value, col=type)) + 
  geom_line()
```

**Solution**: At first glance, it seems milk made the biggest gains! 

But the above plot is of little use since the scale of milk prices is making it
difficult to see any differences in the price of cheese. Let's plot them
separately.

```{r, fig.height=3, fig.width=5}
# Write your code below:
ggplot(data=milk, aes(x=date, y=value)) + 
  geom_line()
ggplot(data=cheese, aes(x=date, y=value)) + 
  geom_line()
```

Both trend up, but which had the biggest relative increases i.e. which had the **highest percent increase**?

```{r, eval=FALSE, echo=FALSE}
library(knitr)
data_frame(
  food_type=c("milk", "cheese"),
  price_1925 = c(90699000000, 501096000),
  price_2014 = c(206046000000, 11450117000 )
) %>% 
  mutate(
    `Absolute Change` = price_2014 - price_1925,
    `% Change` = round(`Absolute Change`/price_1925 * 100, 2)
  ) %>% 
  kable()
```

|Food Type |  1925|   2014| Absolute Change| % Change|
|:---------|-----------:|------------:|---------------:|--------:|
|milk      | 90,699,000,000| 206,046,000,000|    115,347,000,000|   127.18%|
|cheese    |   501,096,000|  11,450,117,000|     10,949,021,000|  2185.01%|

Cheese wins by a landslide. 2100% increase.
