---
title: "Intro to Statistial and Data Sciences"
author: "Albert Y. Kim"
date: "Last updated on `r Sys.Date()`"
output:
  ioslides_presentation:
    df_print: kable
    incremental: true
  html_document:
    toc: true
    toc_float: true
    toc_depth: 1
    theme: cosmo
    highlight: tango
    df_print: paged
    pandoc_args: [
      "--output=notes.html"
    ]
---

<style>
h1{font-weight: bold;}
h2{color: #3399ff;}
h3{color: #3399ff;}
slides slide.backdrop {background: white;}
</style>

<style type="text/css">
slides > slide:not(.nobackground):after {
  content: '';
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
set.seed(76)
if(FALSE){
  # Run this line to render the document as running HTML document instead of
  # slides:
  rmarkdown::render("slides.Rmd", output_format = c("html_document"))
  knitr::purl("slides.Rmd")
  }
```



<!----------------------------------------------------------------------------->
# Lec06 - Fri 2/24: 5NG#1 Scatterplots

## Today

> 1. **Scatterplot AKA bivariate plot**
> 1. Line-graph
> 1. Histogram
> 1. Boxplot
> 1. Barplot AKA Barchart AKA bargraph


## Today

What's not great about this plot, especially near (0, 0)?

```{r}
library(tidyverse)
library(nycflights13)
all_alaska_flights <- flights %>% 
  filter(carrier == "AS")
ggplot(data = all_alaska_flights, aes(x = dep_delay, y = arr_delay)) + 
  geom_point() +
  labs(x="Departure Delay", y="Arrival Delay", title="Departure/Arrival Delays for Alaska Airlines 2013 NYC Flights")
```


## Overplotting

This is called overplotting: when points are stacked so densely we can't see what's going on!

There are two ways of dealing with this:

1. Make points a little more transparent
1. Jiggle the points a little








<!----------------------------------------------------------------------------->
# Lec05 - Thu 2/23: More 5NG

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(knitr)
```


## Refresher: The Grammar of Graphics

A statistical graphic is a mapping of `data` variables to `aes()`thetic
attributes of `geom_`etric objects.


## Refresher: 5NG

The **five named graphs** we'll see in this class. Note: I reordered them from last time to be easiest to hardest to work with:

> 1. Scatterplot AKA bivariate plot
> 1. Line-graph
> 1. Histogram
> 1. Boxplot
> 1. Barplot AKA Barchart AKA bargraph


## Data Visualization via ggplot2 Package

* We are building up to doing data visualization in R via the `ggplot2` package
* Last time we reverse-engineered the grammar from graphical outputs
* Today we (forward) engineer them


## Today's Data

In tidy format: 

```{r}
simple <-
  data_frame(
    A = c(1, 2, 3, 4),
    B = c(1, 2, 3, 4),
    C = c(3, 2, 1, 2),
    D = c("Hot", "Hot", "Cold", "Cold")
  )
simple %>% kable(format="markdown")
```










<!----------------------------------------------------------------------------->
# Lec04 - Wed 2/22: 5NG

```{r, include=FALSE}
library(tidyverse)
library(lubridate)
library(stringr)
library(ggplot2movies)
library(nycflights13)
library(babynames)
library(fueleconomy)
library(okcupiddata)
```

## What is a statistical graphic?

* Today we kick off Topic 2.b) **Data Visualization** by asking ourselves: What is a statistical graphic?
* But a brief lesson from military history first


## Napoleon's March on Russia in 1812

In 1812, Napoleon led a French invasion of Russia, marching on [Moscow](https://goo.gl/maps/geRyXH3rJcK2).  

<center><img src="./assets/figure/napoleon.jpg" alt="Drawing" style="height: 350px;"/></center>


## Napoleon's March on Russia in 1812

It was one of the biggest [military
disasters](http://www.history.com/news/napoleons-disastrous-invasion-of-russia-200-years-ago)
ever, in particular b/c of the Russian winter.

<center><img src="./assets/figure/retreat.jpg" alt="Drawing" style="height: 350px;"/></center>


## Minard's Illustration of the March

Famous graphical illustration of Napolean's march to/from Moscow

<center><img src="./assets/figure/Minard.png" alt="Drawing" style="width: 800px;"/></center>


## Minard's Illustration of the March

This was considered a revolution in statistical graphics because between

> * the map on top
> * the line graph on the bottom

there are 6 dimensions of information (i.e. variables) being displayed on a 2D page.


## The Grammar of Graphics

A statistical graphic is a mapping of `data` variables to `aes()`thetic
attributes of `geom_`etric objects.


## Minard's Illustration of the March

Where? | **`data`** | **`aes()`**  | **`geom_`**
------------- | ------------- | ------------- | -------------
top map | longitude | **`x`** | **`point`** 
" | latitude | **`y`** | **`point`** 
" | army size | **`size`** | **`path`**
" | army direction (forward vs retreat) | **`color`** | **`path`**
bottom graph | date | **`x`** | **`line`** & **`text`**
" | temperature | **`y`** | **`line`** & **`text`**


## Grammar of Graphics

2005 - Proposal            | 2009 - R Implementtation
:-------------------------:|:-------------------------:
<img src="./assets/figure/graphics.jpg" height="300px"/>  | <img src="./assets/figure/ggplot2.jpg" height="300px"/>


## Name this Graph

From `ggplot2movies` package, the `movies` data set:

```{r, echo=FALSE, message=FALSE, warning=FALSE, cache=TRUE}
# Scatterplot i.e. bivariate plot
movies %>% 
  ggplot(data=., aes(x=budget, y=rating)) +
  geom_point() +
  labs(x="Movie Budget", y="IMDB Rating", title="IMDB Rating vs Budget")
```


## Name this Graph

From `nycflights13` package, the `flights` data set:

```{r, echo=FALSE, message=FALSE, warning=FALSE, cache=TRUE}
# Line graph
flights %>% 
  mutate(date=ymd(paste(year, month, day, sep="-"))) %>% 
  filter(month==1) %>% 
  group_by(date) %>% 
  tally() %>% 
  ggplot(data=., aes(x=date, y=n)) + 
  labs(x="Date", y="Number of Flights", title="Number of Daily Flights from NYC in Jan 2013") +
  geom_line()
```


## Name this Graph

From `okcupiddata` package, the `profiles` data set:

```{r, echo=FALSE, message=FALSE, warning=FALSE, cache=TRUE}
# Histogram
profiles %>% 
  ggplot(data=., aes(x=height)) +
  geom_histogram() +
  labs(x="height (in inches)", y="count", title="Heights of San Francisco OkCupid Users")
```


## Name this Graph

From `fueleconomy` package, the `vehicles` data set:

```{r, echo=FALSE, message=FALSE, warning=FALSE, cache=TRUE}
# Boxplot
vehicles %>% 
  mutate(trans2 = ifelse(str_sub(trans, 1, 1) == "M", "Manual", "Automatic")) %>% 
  ggplot(data=., aes(x=trans2, y=hwy)) +
  geom_boxplot() +
  labs(y="Highway Mileage (miles/gallon)", x="Transmission Type",
       title="Highway Mileage of all Car Models 1984-2015") +
  coord_cartesian(ylim=c(5, 45))
```


## Name this Graph

From `babynames` package, the `babynames` data set:

```{r, echo=FALSE, message=FALSE, warning=FALSE, cache=TRUE}
# Bar Chart
babynames %>% 
  mutate(decade = round(year / 10) * 10) %>% 
  filter(name=="Hayden" | name == "Carlos" | name == "Ethan") %>% 
  filter(decade >= 1990) %>% 
  group_by(name) %>% 
  summarise(n=sum(n)) %>% 
  ggplot(data=., aes(x=name, y=n)) +
  geom_bar(stat="identity") +
  labs(x="Name", y="Count", title="Name Counts since 1990")
```


## 5NG

Say hello to the 5NG: the **five named graphs**

1. Scatterplot AKA bivariate plot
1. Line-graph
1. Histogram
1. Boxplot
1. Barplot AKA Barchart AKA bargraph











<!----------------------------------------------------------------------------->
# Lec03 - Mon 2/20: Tidy Data

## What is Tidy Data?

* There are many ways to organize data. Today we learn one way: the "tidy data" format.
* It is rather simple, but deceptively powerful.
* Equivalent to "long format"


## What is Tidy Data?

<img src="http://garrettgman.github.io/images/tidy-1.png" alt="Drawing" style="width: 800px;"/>

1. Each observation forms a row
1. Each variable forms a column
1. Each type of observational unit forms a table



## What is Tidy Data (Advanced)?

1. Each observation forms a row: *In other words, each row corresponds to a single **observational unit***
1. Each variable forms a column:
    + *Some of the variables may be used to identify the **observational units**. For organizational purposes, it's generally better to put these in the left-hand columns*
    + *Some of the variables may be **observed values** associated with each observational unit*
1. Each type of observational unit forms a table: *Don't mix apples and oranges, keep apples with apples and oranges with oranges*



## nycflights13 Package

The [`nycflights13`](https://github.com/hadley/nycflights13) package contains
"tidy data" all 336,776 flights that departed from NYC (e.g. EWR, JFK and LGA) in
2013.

To help understand what causes delays, it also includes a number of other useful datasets.

* `weather`: hourly meterological data for each airport
* `planes`: construction information about each plane
* `airports`: airport names and locations
* `airlines`: translation between two letter carrier codes and names










<!----------------------------------------------------------------------------->
# Lec02 - Thu 2/16: R Packages

## Exercise

In small teams, take 3 minutes to write down

1. A couple of male and female names that are "modern"
1. A couple of male and female names that are "old-fashioned"
1. One male and one female name that are "back in vogue"



## Learning R

* **Computers are stupid!** You need to:
    + Tell it exactly and everything it needs to do
    + Everything needs to be perfect:
        + Write everything from scratch
        + Names of "stuff" need to typed exactly
        + Parentheses need to match
* **Recall**: This is not a class on programming/coding. However, we'll learn just enough to do statistics and data science
* **Side Benefit**: Many of the concepts translate to almost all programming languages: python, javascript, etc.
    


## Learning R

Recall the tradeoff:

Less of this...            |  More of this...
:-------------------------:|:-------------------------:
<img src="./assets/figure/formulas.png" alt="Drawing" style="width: 300px;"/>  |  <img src="./assets/figure/coding.jpg" alt="Drawing" style="width: 300px;"/>
    


## What are R Packages?

* **Base R**, i.e. R straight out of the box. It's fairly limited in power and functionality.
* **R Packages** are extensions to R that are
    + contributed by a world-wide community of R users
    + extend base R's functionality
    + are downloadable over the internet from RStudio.



## Step 1: How Do I Install a Package?

You need to **install** each package once.

* In RStudio: Go to Files Panel -> Packages -> Install
* Type in the package name and click install
* The procedure for updating a package is the same



## Step 2: How Do I Load a Package?

You need to **load** a package everytime you want to use it.

* Run `library(PACKAGENAME)` in the console.



## Baby's First R Packages

Today's Learning Check: Install and then load 3 packages:

* `dplyr`: a package for data manipulation
* `ggplot2`: a package for data visualization
* `babynames`: a package of baby name data



## `babynames` Package

The [`babynames`](https://github.com/hadley/babynames) package contains for each
year from 1880 to 2013, the number of children born of each sex given each name
in the United States. Only names with more than 5 occurrences are considered.











<!----------------------------------------------------------------------------->
# Lec01 - Mon 2/13: Introduction

## Course Title

* In catalog: Introduction to Statistical Sciences
* New: Introduction to Statistical **and Data** Sciences



## What is Data Science?  {.flexbox .vcenter}

![](./assets/figure/data_science_1.png)



## Data Science

* Example domains: biology, economics, physics, sociology, etc.
* So why the title switch?



## Dialogue with Student 

<!--
Hi professor, I really liked your intro stats class. Can I ask you a stats question on a bio project I'm working on?
I have gene expression data in this excel file. How would I run some of the methods we learned in class on it?
http://www.ios7text.com/em78xa
-->

![](./assets/figure/dialogue_1.png)



## Course Objective #1

Have students engage in the data/science research pipeline in as faithful a
manner as possible while maintaining a level [suitable for
novices](http://arxiv.org/abs/1507.05346).  

* Cobb: Minimizing prerequisites to research
* Not necessarily publishing in top journals, but **answering scientific questions with data**.
* Difficult to do research without understanding stats, however



## Data/Science Research Pipeline

We will, as best we can, perform all this:

![](./assets/figure/pipeline.png)



## Data/Science Research Pipeline

And not just this, as in many previous intro stats courses:

![](./assets/figure/pipeline2.png)



## Course Objective #2

Foster a conceptual understanding of statistical topics and methods using 
[simulation/resampling](https://www.amstat.org/education/pdfs/ResamplingUndergradCurriculum.pdf)
and real data whenever possible, rather than mathematical formulae.

* Whenever we can, use real data
* Example data set: [nycflights13](https://github.com/hadley/nycflights13)
* There are two "engines" that can make statistics "work"
    + Mathematics: formulas, approximations, etc
    + Computers: simulations, random number generation 



## The "Engine" of Statistics

In this course, computers and not math will be the "engine". What does this mean?

* Less of this:  
<img src="./assets/figure/formulas.png" alt="Drawing" style="width: 300px;"/>
* But more of this:  
<img src="./assets/figure/coding.jpg" alt="Drawing" style="width: 300px;"/>



## Programming/Coding

* Previous programming/coding experience **is not a prerequisite to this course**
* This course is not an explicit course on programming, coding, nor computer science. But we will use some elements. 
* Also you will be exposed to basic **algorithmic thinking and computational logic**
* Learning R is like learning a foreign language: its really hard at first!



## Two Simple Rules of Learning Code

* Computers are stupid!
* When learning, take existing code that works, and tweak it!



## Course Objective #3

Blur the traditional lecture/lab dichotomy of introductory statistics courses 
by incorporating more [computational and algorithmic
thinking](http://www.stat.berkeley.edu/~statcur/Preprints/ComputingCurric3.pdf) 
into the syllabus.

* Completely separate lecture and labs is a legacy of a time before  
<img src="./assets/figure/laptop.png" alt="Drawing" style="width: 300px;"/>



## RStudio Server

* Not all laptops are created equal: operating system, processing power, age
* RStudio Server: cloud-based version of RStudio where all processing is done on Middlebury servers
* [`go/rstudio/`](https://rstudio.middlebury.edu/) (on campus or via VPN)



<!--
## Thursday Lab Time

**Undirected** time to

* Set aside to help people get up to speed with computing
* It is like learning a language.
* Learn from each other.
* Collaborate on problem sets (due on Fridays)
-->



## Course Objective #5

Develop [statistical 
literacy](https://en.wikipedia.org/wiki/Statistical_literacy) by, among other
ways, tying in the curriculum to current events, demonstrating the importance
statistics plays in society.

* H.G. Wells (paraphrased): "Statistical thinking will one day be as necessary for efficient citizenship as the ability to read and write."
* Me: "Sure, it's easy to lie with statistics. But it's also hard to tell the truth without them."



<!--
## Data Visualization and EDA

* EDA = Exploratory data analysis
* **"Data visualization is a gateway drug to statistics."**
* Prez from Season 4 of HBO's "The Wire":
* <center><img src="./assets/figure/Prez.png" height="300px"/></center>
-->



## Final Project

* Capstone experience to align this topics and principles of this course with how research and learning is done in practice.
* Work on interpersonal and collaborative skills. No textbook on that!



## Lecture Format

Either

* **Lab format**: With laptop
    + You sit in groups of 4
    + I'll talk for 10-15 minutes before you work on learning checks
* **Chalk talk**: Old-school
    + Keep desk in rows
    + More traditional lecture format



## Let's Build our Toolbox

<center><img src="./assets/figure/tools.jpg" height="400px"/><c/enter>



## R, RStudio, and DataCamp

* R: Software behind the scenes i.e. **the engine**
* RStudio: Intergrated development environment i.e. **the interface**
* DataCamp: Browser-based learning tool i.e. **the driver's ed teacher**



## Analogy

R            |  RStudio |  DataCamp
:-------------------------:|:-------------------------:|:-------------------------:
<img src="./assets/figure/engine.jpg" alt="Drawing" style="width: 200px;"/>  |  <img src="./assets/figure/dashboard.jpg" alt="Drawing" style="width: 200px;"/>  |  <img src="./assets/figure/instructor.jpg" alt="Drawing" style="width: 200px;"/>



## Test Drive RStudio

> * Login to [`go/rstudio/`](https://rstudio.middlebury.edu/auth-sign-in) with your Midd account
> * If you don't have access, raise your hand. (Username: guest1, password: rstudioguest)
> * In RStudio menu bar -> File -> New File -> R Script



## The Four Panels

1. Console: Crunch numbers in R
1. Files, Packages, Help: See your files, install packages, help files
1. Editor: Where you'll write code and save it
1. Environment: Your workspace



## Important: Console

> * This is where you run/execute commands
> * The ">" is the prompt.  It means R is ready to receive commands
> * If you don’t see a ">" and want to restart, press ESC.



## Switching Gears

Now we will use R via DataCamp instead of via RStudio, but just for driver's ed. Two panels exist in both:

1. Editor panel: Where you write code
1. Console panel: Where you will execute code
